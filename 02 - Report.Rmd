---
title: "R Markdown for Reproducible Reporting"
author: "Patrick Mathias"
output:
  pdf_document: default
  html_document: default
---

## Setup

The first chunk in the document is typically where you load all packages you will use throughout the document.

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readxl)
library(janitor)
library(knitr) # making nice tables
```

## Where am I?

Use `getwd()` to show your working directory.

```{r wd}
getwd()
```

## Load a file

```{r load_file}
catalog <- read_csv("data/test_catalog.csv")
```

What does RStudio tell you after you import the data?

## Your Turn 4

1. Locate and load the orders data set for the course from the data folder into an object (data frame) called "orders". 
2. Within your Environment tab (top right), click the name of the object and review the raw data.
3. Summarize the data using the `summary()` function.

```{r}
orders <- 
summary( )
```

## Tabulating

`tabyl` function can create quick cross tabluations to drill down into categorical fields.

```{r}
tabyl(orders, department)
```


```{r}
tabyl(orders, department, order_status_c_descr)
```

## Your Turn 5

1. Which 3 departments ordered the highest number of labs using “Provider Preference Lists”? (pref_list_type variable)
2. What happens if you add another variable to the tabyl() function (3 variables total)? Start out with variables we've already created tables for.

```{r}
tabyl(orders, , )
tabyl(orders, , )
```

## Making your tables pretty

```{r}
kable(tabyl(orders, department, pref_list_type))
```

## Creating basic plots

```{r}
ggplot(orders) + 
  geom_histogram(aes(x = order_time))
```

```{r}
ggplot(orders) + 
  geom_histogram(aes(x = order_time), binwidth = 24*60*60)
```

```{r}
ggplot(orders) + 
  geom_histogram(aes(x = order_status_c_descr), stat = "count")
```

## Your turn 6

1. Plot the distribution of review times by day.
2. Plot the distribution of order reviews by week instead of by day.

```{r}
ggplot(orders) +
  geom_histogram(aes(x = ), binwidth = 24*60*60)
ggplot(orders) +
  geom_histogram(aes(x = ), binwidth = )
```

## Your turn 7

Create a pdf of your lesson 2 markdown document using “Knit to pdf”

## Your turn 8

1. Create a new R Markdown document but select “Presentation” instead of “Document” from menu
2. Select one of the HTML options and knit the document
